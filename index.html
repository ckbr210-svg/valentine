<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Valentine ğŸ’–</title>
<link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">

<style>
body {
    margin: 0;
    overflow: hidden;
    font-family: 'Pacifico', cursive;
    background: linear-gradient(135deg, #ff9a9e, #fad0c4);
}

#card {
    position: absolute;
    top: 38%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
    font-size: 34px;
    color: #ff4d6d;
    z-index: 10;
}

button {
    padding: 14px 28px;
    font-size: 20px;
    border: none;
    border-radius: 30px;
    cursor: pointer;
    transition: transform 0.2s;
}

/* ONLY chaos buttons are absolute */
#yes, #no {
    position: absolute;
}

#yes { background:#ff4d6d; color:white; }
#no  { background:#ccc; }

.heart,.confetti {
    position: fixed;
    font-size: 22px;
    animation: float 4s linear forwards;
}

@keyframes float {
    from { transform: translateY(100vh); opacity: 1; }
    to   { transform: translateY(-100px); opacity: 0; }
}
</style>
</head>

<body>

<div id="card">Dibbbbbuuuuuuuu, will you be my Valentine? ğŸ’˜</div>
<button id="yes">Yes â¤ï¸</button>
<button id="no">No ğŸ’”</button>

<script>
const yesBtn = document.getElementById("yes");
const noBtn  = document.getElementById("no");
const card   = document.getElementById("card");

let attempts = 0;
let unlocked = false;
let fakeUnlocked = false;
let swapped = false;

const yesTexts = [
  "Almost ğŸ˜","Too slow ğŸ˜ˆ","Try again ğŸ‘€",
  "You want this ğŸ˜Œ","Nope ğŸ˜œ","Still chasing?"
];

// ---------- SAFE RANDOM POSITION ----------
function place(btn) {
    const r = card.getBoundingClientRect();
    let x,y,ok;
    do {
        ok=true;
        x=Math.random()*(window.innerWidth-btn.offsetWidth);
        y=Math.random()*(window.innerHeight-btn.offsetHeight);
        if (x<r.right && x+btn.offsetWidth>r.left &&
            y<r.bottom && y+btn.offsetHeight>r.top) ok=false;
    } while(!ok);
    btn.style.left=x+"px";
    btn.style.top=y+"px";
}

place(yesBtn); place(noBtn);

// ---------- NO CHAOS ----------
noBtn.onmouseenter = noBtn.ontouchstart = () => {
    place(noBtn);
    noBtn.style.transform =
        `scale(${0.6+Math.random()*0.4}) rotate(${Math.random()*20-10}deg)`;
};

// ---------- YES CHAOS ----------
yesBtn.onmouseenter = yesBtn.ontouchstart = () => {
    if (unlocked) return;

    attempts++;
    if (navigator.vibrate) navigator.vibrate(80);

    yesBtn.innerText = yesTexts[attempts % yesTexts.length];
    yesBtn.style.transform = `scale(${1 + attempts*0.07})`;
    yesBtn.style.boxShadow = `0 0 ${attempts*4}px rgba(255,77,109,.7)`;

    // FAKE UNLOCK
    if (attempts === 8 && !fakeUnlocked) {
        fakeUnlocked = true;
        yesBtn.innerText = "YES â¤ï¸";
        setTimeout(()=>place(yesBtn),600);
        return;
    }

    // SWAP YES & NO ONCE ğŸ˜ˆ
    if (attempts === 6 && !swapped) {
        swapped = true;
        const yPos = yesBtn.getBoundingClientRect();
        const nPos = noBtn.getBoundingClientRect();
        yesBtn.style.left = nPos.left+"px";
        yesBtn.style.top  = nPos.top+"px";
        noBtn.style.left  = yPos.left+"px";
        noBtn.style.top   = yPos.top+"px";
    }

    place(yesBtn);
    if (attempts >= 10) unlockYes();
};

// ---------- UNLOCK YES ----------
function unlockYes() {
    unlocked = true;
    yesBtn.innerText = "YES ğŸ’–";
    yesBtn.style.transform = "scale(1.3)";
}

// ---------- BLOCK EARLY CLICKS ----------
yesBtn.onclick = (e) => {
    if (!unlocked) {
        e.preventDefault();
        yesBtn.innerText = "Not yet ğŸ˜œ";
        return;
    }
    celebration();
};

// ---------- COUNTDOWN PRESSURE ----------
function startCountdown() {
    let t = 5;
    const interval = setInterval(()=>{
        yesBtn.innerText = `YES (${t}) ğŸ’“`;
        t--;
        if (t < 0) {
            clearInterval(interval);
            yesBtn.innerText = "Hurry ğŸ˜ˆ";
        }
    },1000);
}

// ---------- CELEBRATION ----------
function celebration() {
    document.body.innerHTML = `
    <div style="
        min-height:100vh;
        display:flex;
        flex-direction:column;
        justify-content:center;
        align-items:center;
        text-align:center;
        background:linear-gradient(135deg,#ff9a9e,#fad0c4);
        color:#ff4d6d;
        padding:30px;
        box-sizing:border-box;
        gap:30px;
    ">

        <div style="font-size:34px;">
            I knew You'd say YES ğŸ’–ğŸ¥°
        </div>

        <button id="letterBtn" style="
        position: relative;
        padding:16px 34px;
        font-size:22px;
        border:none;
        border-radius:40px;
        background:#ff4d6d;
        color:white;
        cursor:pointer;
        box-shadow:0 8px 20px rgba(255,77,109,.4);
        ">

            Read My Letter ğŸ’Œ
        </button>

    </div>
    `;
    startHearts();
    startConfetti();

    document.getElementById("letterBtn").onclick = showLetter;
}


// ---------- LETTER ----------
function showLetter() {
    document.body.innerHTML = `
    <div style="
        padding:40px;
        font-size:26px;
        line-height:1.6;
        color:#ff4d6d;
        background:#fff5f7;
        height:100vh;">
        Dear You â¤ï¸,<br><br>
        This little chaotic page is exactly how my feelings are â€”
        messy, playful, nervousâ€¦ but very real.<br><br>
        Every time you chased that YES,
        it reminded me how lucky Iâ€™d be if you chose me too.
        And I hope I get to keep making you smile,
        again and again ğŸ’–<br><br>
        Yours always,<br>âœ¨ CB
    </div>
    `;
}

// ---------- EFFECTS ----------
function startHearts(){ for(let i=0;i<40;i++) setTimeout(()=>spawn("â¤ï¸"),i*120); }
function startConfetti(){ for(let i=0;i<40;i++) setTimeout(()=>spawn("ğŸŠ"),i*100); }

function spawn(char){
    const d=document.createElement("div");
    d.className="heart";
    d.innerText=char;
    d.style.left=Math.random()*window.innerWidth+"px";
    document.body.appendChild(d);
    setTimeout(()=>d.remove(),5000);
}
</script>
</body>
</html>
